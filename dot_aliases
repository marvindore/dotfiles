#Linux set sudo path to user path
#https://stackoverflow.com/questions/12996397/command-not-found-when-using-sudo
alias mudo='sudo -E env "PATH=$PATH"'

alias copyq='flatpak run com.github.hluk.copyq'
alias flatseal='flatpak run com.github.tchx84.Flatseal'
alias flameshot='env QT_SCREEN_SCALE_FACTORS="1;1.5;" flatpak run org.flameshot.Flameshot gui'
alias upgradedistrobox='curl -s https://raw.githubusercontent.com/89luca89/distrobox/main/install | sudo sh -s -- --next'
alias flake='nvim ~/.config/nix-darwin/'
alias msbuild='$HOME/.local/share/mise/shims/dotnet'
alias MSBuild='$HOME/.local/share/mise/shims/dotnet'

#git

#Php
alias sail='[ -f sail ] && bash sail || bash vendor/bin/sail'

# Python
alias py="python3"
#alias python="python3"

# Vim
alias vd="nvim -d"
alias nv="nvim"
alias sv="sudo nvim"
alias v="nvim"
alias zj="zellij"
alias zjn="zellij -s"

alias l="eza"

alias wiki="nvim ~/vimwiki/index.md"

function darwin-update() {
  echo "Building system configuration as unprivileged user..."
  nix build ~/.config/nix-darwin#darwinConfigurations.mchip.system

  if [ $? -eq 0 ]; then
    # this step doesn't need the full path darwinConfigurations.mchip.system
    # similarly the darwin-rebuild command looks up the systemconfiguration on its own.

    echo "Build successful. Switching system configuration as root..."
    sudo darwin-rebuild switch --flake ~/.config/nix-darwin#mchip
  else
    echo "Nix build failed. Aborting switch."
  fi
}

function cht() {
# :list
# :learn
# sub topic
    lang=$(curl -s cht.sh/:list | fzf)
    topic=$(
      {
        echo "ALL"
        curl -s "cht.sh/$lang/:list"
      } | fzf
    )

    if [[ "$topic" == "ALL" ]]; then
      curl -s "cht.sh/$lang" | bat
    else
      curl -s "cht.sh/$lang/$topic" | bat
    fi
}
